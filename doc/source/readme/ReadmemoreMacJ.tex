\documentclass{ujarticle}
\usepackage{ketpic,ketlayer}
\usepackage{amsmath,amssymb}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{bm,enumerate}
\usepackage[dvipdfmx,colorlinks=true,urlcolor=blue]{hyperref}

\setmargin{20}{20}{20}{20}

\西暦

\renewcommand{\labelitemi}{・}
\renewcommand{\labelitemii}{・}

\begin{document}

\begin{center}
KETCindyについての補足(Mac)
\end{center}

\hfill 修正日：\today

\begin{enumerate}[\bf\large 1.]

\item KeTTeXのインストール

\begin{itemize}
\item 以下から\verb|kettex.dmg|をダウンロードする．\\
\hspace*{10mm}\url{https://github.com/ketpic/kettex/releases}
\item kettex.dmgをダブルクリックして仮想ディスクを開き，KetTeX.appをApplicationsに入れる．\\
\hspace*{1zw}注）仮想ディスクにあるApplicationsにドラグドロップすればよい．
%\item
%最初の実行時，セキュリティの制限によって実行不可のエラーが出る場合（特にCatalina以降）
%    \begin{enumerate}[(1)]
%   \item キャンセルを押す．（ゴミ箱を選ばない）
%   \item システム環境設定＞セキュリティとプライバシー　を開く．
%   \item 「このまま許可」をクリックする．
%   \end{enumerate}

\end{itemize}

\item KeTCindyのインストール
\begin{itemize}
\item ketcindysettings.cdyを利用する．
\begin{enumerate}[(1)]
\item 必要なら，「情報を見る」でアプリをCinderella.appを選び，「すべてを変更」
\item \verb|ketcindysettings.cdy|を立ち上げる．
\item 左方にあるボタンで，言語，TeXの種類，描画コードを選ぶ．\\
\hspace*{10mm}ボタンを押すと順に項目が変わる．
\item 中央にあるボタンでTeXシステムを選ぶ．\\
\hspace*{10mm}KeTTeX，TeXLive以外の場合は，CindyScriptでパスを設定してから．\verb|Other|を選ぶ．
\item 右側にあるボタンを順に押す．\\
\hspace*{5mm}\verb|Mkinit|：初期化ファイルketcindy.iniと作業フォルダをユーザホームに作成\\
\hspace*{5mm}\verb|Update|：TeXに入っているketlib関連のファイルを更新（コピー）\\
\hspace*{5mm}\verb|Work|：初期設定ファイル\verb|ketcindy.ini|と
作業フォルダketcindy+日付をユーザホームに作成
\item[注)]\verb|KeTTeX.app|を選択して\verb|Update|を実行した場合\\
\hspace*{5mm}\verb|/Applications|に\verb|KeTTeX.app/texlive|のシンボリックリンク\verb|kettexlive|が作られる．
\item[注)]Updateの実行中に，「xattr: No such file... man」のメッセージが出るが気にしなくてよい．
\end{enumerate}
%\item ketcindysettings.cdyのUpdateでエラーが出た場合\\
%\hspace*{10mm}{\bf 1.}を実行する．
\end{itemize}

  \item KeTCindyのテストラン
    \begin{enumerate}[(1)]
    \item ketcindysettings.cdyを終了してから，testrun.cdyを開く．\\
      \hspace*{10mm}画面に白い枠が出れば，ライブラリの読み込みは成功．
    \item スクリーンの左上部にあるFigureボタンを押して，PDFが表示されれば成功．\\
\hspace*{10mm}KeTTeXでエラーが出た場合は{\bf 1.}を実行する．
\end{enumerate}
%\newpage

\item TeXWorksの設定（kettexの場合）
  \begin{itemize}
  \item \url{https://github.com/TeXworks/texworks/releases/} からダウンロードできる．
  \item TeXworksを立ち上げ，「TeXworks \verb|>| 環境設定 \verb|>| タイプセット」
  \item 上の欄（パス）に\verb|kettexlive|を選択して入れる\\
  \hspace*{10mm}注) この行を上の欄の先頭に移動する．
  \item 下の欄の横にある + をクリック
    \begin{itemize}
    \item 名前：uplatex(ptex2pdf)またはplatex(ptex2pdf)
    \item プログラム : ptex2pdf
    \item 引数：\\
    \hspace*{10mm} \verb|-u|（uplatexの場合のみ）\\
    \hspace*{10mm} \verb|-l|\\
    \hspace*{10mm} \verb|-ot|\\
    \hspace*{10mm}  \verb|$synctexoption|\\
    \hspace*{10mm}  \verb|$fullname|
    \item[]OKボタンを押し，デフォルトを変更してOKボタンを押す．
    \end{itemize}
  \end{itemize}

\item TeXShopの設定（kettexの場合）
  \begin{itemize}
  \item \verb|/Applications/TeX/TexShop.app|がなければ，以下からダウンロードする．\\
  \hspace*{5mm}\url{https://pages.uoregon.edu/koch/texshop/obtaining.html}
  \item TeXShopを立ち上げ，「TeXShop \verb|>| 環境設定 |」
  \item 「書類\verb|>|設定プロファイル」　ptex(ptex2pdf)かuptex(uptex2pdf)を選ぶ
  \item 「内部設定\verb|>|パス設定」に\verb|kettex/bin/...darwin|フォルダをドラグドロップする．
  \end{itemize}

\item gccのインストール
  \begin{itemize}
    \item 曲面描画のためには, gccが必要である．
    \item Xcodeがインストールされていなければ，インストールする．\\
    \hspace*{5mm}注) ターミナルで次を実行すれば，gccだけがインストールされる．\\
    \hspace*{20mm}\verb|sudo xcode-select --install|
  \end{itemize}


\item M1でのMaximaのインストール
  \begin{enumerate}[(1)]
    \item Homebrewを以下のコマンドでインストールする．\\
　{\small \verb|/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"|}\\
　　・Homebrewを既にインストールしている場合は不要
\item Maximaをインストールする．\\
　\verb|brew install maxima|
\item \verb|type|でMaximaのインストール先を見つける(typeはMac専用)．\\
　\verb|type maxima|\\
　　・\verb|/opt/local|, \verb|/usr/local|などの中にある．
\item ユーザーホームにある\verb|ketcindy.ini|のPathMに上で得たパスを入れる．
  \end{enumerate}

%\item 手動でコピーする場合（KeTTeX）\\
%\hspace*{1zw}注）他のTeXの場合は，適宜パスを置き換える．\\
%\hspace*{3zw}\verb|/Applications/kettex/texlive| $=>$ \verb|/Library/TeX/Root| など
%  \begin{enumerate}[(1)]
%  \item ketcindy(-master)/ketcindyfolderを開いておく．
%  \item scriptsフォルダの中身を以下にコピーする．\\
%　\verb|/Applications/kettex/texlive/texmf-dist/scripts/ketcindy|
%  \item styleフォルダの中身を以下にコピーする．\\
%　\verb|/Applications/kettex/texlive/texmf-dist/tex/latex/ketcindy|
%  \item docフォルダの中身を以下にコピーする．\\
%　\verb|/Applications/kettex/texlive/texmf-dist/doc/support/ketcindy|
%  \item ターミナルで以下を実行する\\
%  \hspace*{1zw}\verb|sudo /Applications/kettex/texlive/bin/x86_64-darwin/mktexlsr|
%  \item workをユーザホームなど適当な場所にコピーして，名前（例えばketcindy）を変更する．
%  \item 上の作業ディレクトリ(ketcindy)に doc/ketmanual のマニュアルをコピーする．
%  \end{enumerate}

\item その他

\begin{itemize}
\item kettex.appの実行許可が与えられていないときは，ターミナルで\\
\hspace*{5mm}sudo xattr -r -d com.apple.quarantine    /Applications/KeTTeX.app\\
を実行する（「manなどのファイルがない」とのメッセージが出ても問題ない）
%\begin{enumerate}[(1)]
%\item ターミナルで \verb|sudo stctl --master-disable| を実行
%\item システム環境設定＞セキュリティとプライバシー を開く
%\item 実行の許可が「すべてを許可」になっているかを確認する
%   \end{enumerate}
%
    \item PDFの表示後，ターミナル画面を閉じるようにする
       \begin{enumerate}[(1)]
        \item アプリケーション \verb|/| ユーティリティ \verb|/| ターミナルを開く
        \item トップメニューから\\
          \hspace*{5mm}ターミナル＞環境設定 \verb|>|（プロファイル）\verb|>| シェル\\
          \hspace*{10mm}「シェルが正常に終了した場合閉じる」を選択
        \end{enumerate}
\end{itemize}

\end{enumerate}

\end{document}